##################################
# 1. Generate RSA key pairs
# 2. Use it to create x509 CA cert
# 3. Convert tls.key to der format so Java can load it
# 4. Create CA key store to hold the cert which will be used as client's trust store when sending HTTPS request

openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:2048 -out tls.key
openssl req -new -x509 -days 3600 -key tls.key -subj "/CN=localhost/O=RH" -out tls.crt
openssl pkcs8 -topk8 -outform DER -in tls.key -out tls.der -nocrypt
keytool -import -alias ca -file tls.crt -keystore tls.jks

# input 'passwd' when prompted
# answer 'yes' when asked
